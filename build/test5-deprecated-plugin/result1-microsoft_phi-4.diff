```
--- a/ConfigureKotlin.kt
+++ b/ConfigureKotlin.kt
@@ -1,6 +1,6 @@
 package com.google.samples.apps.nowinandroid

 import com.android.build.api.dsl.CommonExtension
-import org.gradle.api.JavaVersion
+import org.jetbrains.kotlin.gradle.dsl.KotlinBaseExtension
 import org.gradle.api.Project
 import org.gradle.api.plugins.JavaPluginExtension
 import org.gradle.kotlin.dsl.assign
@@ -11,7 +11,6 @@
 import org.jetbrains.kotlin.gradle.dsl.JvmTarget
 import org.jetbrains.kotlin.gradle.dsl.KotlinAndroidProjectExtension
-import org.jetbrains.kotlin.gradle.dsl.KotlinTopLevelExtension
 import org.jetbrains.kotlin.gradle.dsl.KotlinJvmProjectExtension

 /**
  * Configure base Kotlin with Android options
@@ -21,7 +20,7 @@ internal fun Project.configureKotlinAndroid(
     commonExtension: CommonExtension<*, *, *, *, *, *>,
 ) {
     commonExtension.apply {
-        compileSdk = 35
+        compileSdkVersion(35)

         defaultConfig {
             minSdk = 23
@@ -36,6 +35,7 @@ internal fun Project.configureKotlinAndroid(
             isCoreLibraryDesugaringEnabled = true
         }
     }
+
     configureKotlin<KotlinAndroidProjectExtension>()

     dependencies {
@@ -47,7 +47,7 @@ internal fun Project.configureKotlinAndroid(
 /**
  * Configure base Kotlin options for JVM (non-Android)
  */
-internal fun Project.configureKotlinJvm() {
+internal fun Project.configureKotlinJvm(): Unit {
     extensions.configure<JavaPluginExtension> {
         // Up to Java 11 APIs are available through desugaring
         // https://developer.android.com/studio/write/java11-minimal-support-table
@@ -57,7 +57,7 @@ internal fun Project.configureKotlinJvm() {
     configureKotlin<KotlinJvmProjectExtension>()
 }
 
-/**
+/*
  * Configure base Kotlin options
  */
 private inline fun <reified T : KotlinTopLevelExtension> Project.configureKotlin() = configure<T> {
@@ -65,7 +65,7 @@ private inline fun <reified T : KotlinTopLevelExtension> Project.configureKotlin
     // Override by setting warningsAsErrors=true in your ~/.gradle/gradle.properties
     val warningsAsErrors = providers.gradleProperty("warningsAsErrors").map {
         it.toBoolean()
-    }.orElse(false)
+    }.getOrElse { false }
     when (this) {
         is KotlinAndroidProjectExtension -> compilerOptions
         is KotlinJvmProjectExtension -> compilerOptions
@@ -73,7 +73,7 @@ private inline fun <reified T : KotlinTopLevelExtension> Project.configureKotlin
             TODO("Unsupported project extension $this ${T::class}")
     }.apply {
         jvmTarget = JvmTarget.JVM_11
-        allWarningsAsErrors = warningsAsErrors
+        isAllWarningsAsErrors = warningsAsErrors
         freeCompilerArgs.add(
             // Enable experimental coroutines APIs, including Flow
             "-opt-in=kotlinx.coroutines.ExperimentalCoroutinesApi",
@@ -83,7 +83,7 @@ private inline fun <reified T : KotlinTopLevelExtension> Project.configureKotlin
             /**
              * Remove this args after Phase 3.
              * https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-consistent-copy-visibility/#deprecation-timeline
-             *
+             */
              * Deprecation timeline
              * Phase 3. (Supposedly Kotlin 2.2 or Kotlin 2.3).
              * The default changes.
@@ -93,7 +93,7 @@ private inline fun <reified T : KotlinTopLevelExtension> Project.configureKotlin
              * '-Xconsistent-data-class-copy-visibility' compiler flag and ConsistentCopyVisibility annotation are now unnecessary.
              */
             "-Xconsistent-data-class-copy-visibility"
-        )
+        )
     }
 }
```